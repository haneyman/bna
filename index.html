<!doctype html>
<html xmlns="http://www.w3.org/1999/html">
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width" />
<title>BartNapApp</title>
<!--<link rel="stylesheet" href="assets/css/master.css" type="text/css" media="screen" />-->
<link rel="stylesheet" href="assets/css/jquery.mobile-1.1.1.min.css" type="text/css" media="screen" />
<script src="phonegap.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/jquery.mobile-1.1.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/jquery.csv.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/bna.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    $(document).ready(function(){
        log("Docready starting...",1);
        $('#departProgress').hide();
        $('#debugLog').hide();


        $("[name=radio-alarm-state]").change(function() {
            isAlarmOn = $('#radio-alarm-on').attr("checked")=="checked";
            log("Alarm switched to " + isAlarmOn,1);
            if (isAlarmOn)
                alarmOn();
            else
                alarmOff();
        });

        $("[name=radio-alarmtype]").change(function() {
            if ( $('#radio-alarmtype-noise').attr("checked")=="checked")
                alarmType = 1;
            else if ( $('#radio-alarmtype-vibrate').attr("checked")=="checked")
                alarmType = 2;
            else
                alarmType = 3;
            log("Alarm type is now" + alarmType,1);
        });

        $('#select-depart').change(function() {
            newTrip();
        });
        $('#select-arrive').change(function() {
            newTrip();
        });

        //initializations
        //$('#debugLog').trigger( "expand" );
        //switchAlarm(false);
        initialize();

        log("Docready complete",1)
    });
</script>
</head>
<body>
<section id="page1" data-role="page" data-fullscreen="true">
    <header data-role="header" ZZdata-position="fixed"><h1>BART Nap App</h1></header>
    <div class="content" data-role="content">
        <div style="float:right">
            <a href="#pageMap"  data-rel="dialog">BART Map</a>
        </div>
        <div style="margin-top: 20px; width:320px;">
            <div  style="height: 10px;" ondblclick="$('#debugLog').toggle();">
                <!--<label for="select-depart" ondblclick="$('#debugLog').show();">Start</label>-->
                <div style="float:left;height: 10px">Start</div>
                <div style="float:right;height: 10px;font-size: 12px;color: #8b4513;">
                    <span id="departProgress" >Searching...</span>
                    <span style="font-size: 12px;color: #8a2be2;" id="departTime" ></span>
                </div>
            </div>

            <div  style="" data-role="fieldcontain">
                <select id="select-depart" name="select-depart">
                </select>
            </div>
        </div>
        <div style="">
            <div  style="height: 10px;">
                <div style="float:left;height: 10px">End</div>
                <div style="float:right;height: 10px;">
                    <span class="arriveTime" style="font-size: 12px;color: #8b4513;"></span>
                </div>
            </div>
            <div style="" data-role="fieldcontain">
                <select id="select-arrive" name="select-arrive">
                </select>
            </div>
        </div>
        <fieldset id="alarmtype" style="" data-role="controlgroup" data-type="horizontal">
            <!--<div style="">Alarm Type</div>-->
            <!--<div>-->
                <input  style="" type="radio" name="radio-alarmtype" id="radio-alarmtype-noise" value="choice-alarmtype-noise" checked="checked" />
                <label for="radio-alarmtype-noise" style="width:95px;">Alarm</label>
                <input type="radio" name="radio-alarmtype" id="radio-alarmtype-vibrate" value="choice-alarmtype-vibrate"  />
                <label for="radio-alarmtype-vibrate" style="width:95px;">Vibrate</label>
                <input type="radio" name="radio-alarmtype" id="radio-alarmtype-both" value="choice-alarmtype-both"  />
                <label for="radio-alarmtype-both" style="width:95px;">Both</label>
            <!--</div>-->
        </fieldset>


        <div data-role="fieldcontain" style="">
            <!--<div style="float:left;margin-top:10px;">ON / OFF</div>-->
            <fieldset id="radio-alarm-state" data-role="controlgroup" data-type="horizontal">
                <!--<legend>Alarm:</legend>-->
                <input type="radio" name="radio-alarm-state" id="radio-alarm-on">
                <label for="radio-alarm-on"  style="color:green;width:142px;">Alarm ON</label>
                <input type="radio" name="radio-alarm-state" id="radio-alarm-off" checked="checked">
                <label for="radio-alarm-off" style="color:red;width:142px;">Alarm OFF</label>
            </fieldset>
        </div>

<!--

        <div id="alarmStatus" style="border: solid #828282; border-radius: 15px; text-align: center">
            &lt;!&ndash;Projected Arrival Time <span id="arriveTime">?</span>&ndash;&gt;
            &lt;!&ndash;<br />&ndash;&gt;
            <span id="timeRemaining" style="font-size: 32px;">??:??</span>
            <div id="progressbar"></div>
        </div>

-->
        <div id="alarmStatus" style="height: 100px;">
            <a id="timeRemaining" href="#" data-role="button" data-icon="star" data-theme="e"></a>
        </div>

        <!--<button value="zzzz" style="height: 160px;">Projected Arrival Time<br/>4:34 </button>-->

        <div id="debugLog" style="font-size: 10px; color: #C97917;background-color: #fff9df;" data-role="collapsible">
            <h3>Debug Log</h3>
            <a href="#pageDebug">debug</a>&nbsp;&nbsp;&nbsp;
            <a href="#"  onclick="clearLog();">Clear</a>&nbsp;&nbsp;&nbsp;
            <a href="#" onclick="getBartStations();">Load Stations</a>&nbsp;&nbsp;&nbsp;
            <a href="#" onclick="loadStopTimes();">Load Stop Times</a>&nbsp;&nbsp;&nbsp;
            <a href="#" onclick="getTripTime(stationDepartAbbr,stationArriveAbbr,getCurrentTimeHHMMSS());">Trip Time</a>&nbsp;&nbsp;&nbsp;
            <a href="#" onclick="alarm();">Alarm</a>&nbsp;&nbsp;&nbsp;
            <a href="#" onclick="alarmOff();">Alarm Off</a>&nbsp;&nbsp;&nbsp;
            <div id="log"  style="height: 200px;overflow: scroll;overflow-x:hidden;background-color: #111111; font-size: 12px; color: #C6E746;"></div>
        </div>
    </div>
    <!--<footer data-role="footer"><h1>MTS</h1></footer>-->
</section>

<section id="pageMap" data-role="page">
    <header data-role="header"><h1>BART Map</h1></header>
    <div class="content" data-role="content">
        <p><img src="assets/img/system-map.gif"></p>
    </div>
    <footer data-role="footer" ZZdata-position="fixed"><h1>MTS</h1></footer>
</section>

<section id="pageDebug" data-role="page">
    <header data-role="header"><h1>Debug Page</h1></header>
    <div class="content" data-role="content">
        <div id="geolocation">
        </div>
        <a href="#" id="" onclick="alarm()">Alarm</a>
    </div>
    <!--<footer data-role="footer" ZZdata-position="fixed"><h1>MTS</h1></footer>-->
</section>

<!--Uncomment below to send debug to Phonegap Build site-->
<!--<script type="text/javascript" src="http://debug.phonegap.com/target/target-script-min.js#69d930ba-da73-11e1-9ed2-1231391c98a7"></script>-->
</body>

</html>