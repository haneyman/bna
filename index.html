<!doctype html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width" />
<title>BartNapApp</title>
<!--<link rel="stylesheet" href="assets/css/master.css" type="text/css" media="screen" />-->
<link rel="stylesheet" href="assets/css/jquery.mobile-1.1.1.min.css" type="text/css" media="screen" />
<link rel="stylesheet" href="assets/css/bna.css" type="text/css" media="screen" />
<script src="phonegap.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/jquery.mobile-1.1.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/jquery.csv.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/js/jquery.cookie.js"></script>
<script src="assets/js/bna.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    $(document).ready(function(){
    //$(document).bind('pageinit') {
        log("Docready starting...",1);
        $('#debugLog').hide();


        $("[name=radio-alarm-state]").change(function() {
            isAlarmOn = $('#radio-alarm-on').attr("checked")=="checked";
            log("Alarm switched to " + isAlarmOn,1);
            if (isAlarmOn)
                alarmOn();
            else
                alarmOff();
        });

        $("[name=radio-alarmtype]").change(function() {
            if ( $('#radio-alarmtype-noise').attr("checked")=="checked")
                alarmType = 1;
            else if ( $('#radio-alarmtype-vibrate').attr("checked")=="checked")
                alarmType = 2;
            else
                alarmType = 3;
            log("Alarm type is now" + alarmType,1);
        });

        $('#select-depart').change(function() {
            newTrip();
        });
        $('#select-arrive').change(function() {
            newTrip();
        });

        //initializations
        //$('#debugLog').trigger( "expand" );
        //switchAlarm(false);
        initialize();

        log("Docready complete",1)
    });

    function testGetTrip() {
        $("#select-depart option:selected").val("CONC");
        $("#select-arrive option:selected").val("EMBR");
        //alert('yeah?');
    }
</script>
</head>
<body>
<section id="pageHome" data-role="page" data-fullscreen="true" data-theme="a">
    <header data-role="header" data-id="header"  data-theme="d">
        <div style="text-align:center">
            <img src="assets/img/logoTrans.png" height="45px;">
        </div>
    </header>
    <div class="content" data-role="content" style="margin-left: 5px;width:300px;">
        <div style="margin-top: 5px;">
            <div  style="height: 10px;" >
                <!--<label for="select-depart" ondblclick="$('#debugLog').show();">Start</label>-->
                <div style="float:left;height: 10px;margin-top: 9px;">Start</div>
                <div style="float:right;margin-bottom: 13px;height: 10px;font-size: 8px;">
                    <a id="buttonStartTime" href="#pageStartTimes" data-role="button" data-mini="true"><span style="color: #F2C43d;" id="departTime">????</span></a>
                </div>
            </div>

            <div  style="" data-role="fieldcontain">
                <select id="select-depart" name="select-depart">
                </select>
            </div>
        </div>
        <div style="">
            <div  style="height: 10px;">
                <div style="float:left;height: 10px;margin-top:5px;margin-bottom: 2px"  ondblclick="testGetTrip();">
                    End
                </div>
                <div style="float:right;height: 10px;">
                    <span class="arriveTime" style="font-size: 12px;color: #F2C43d;"></span>
                </div>
            </div>
            <div style="" data-role="fieldcontain">
                <select id="select-arrive" name="select-arrive">
                </select>
            </div>
        </div>

        <!--<button onclick="newTrip();">Get Time</button>-->

        <fieldset id="alarmtype" style="" data-role="controlgroup" data-type="horizontal">
            <!--<div style="">Alarm Type</div>-->
            <!--<div>-->
                <input  style="" type="radio" name="radio-alarmtype" id="radio-alarmtype-noise" value="choice-alarmtype-noise" checked="checked" />
                <label for="radio-alarmtype-noise" style="width:95px;">Alarm</label>
                <input type="radio" name="radio-alarmtype" id="radio-alarmtype-vibrate" value="choice-alarmtype-vibrate"  />
                <label for="radio-alarmtype-vibrate" style="width:95px;">Vibrate</label>
                <input type="radio" name="radio-alarmtype" id="radio-alarmtype-both" value="choice-alarmtype-both"  />
                <label for="radio-alarmtype-both" style="width:95px;">Both</label>
            <!--</div>-->
        </fieldset>


        <div data-role="fieldcontain" style="">
            <!--<div style="float:left;margin-top:10px;">ON / OFF</div>-->
            <fieldset id="radio-alarm-state" data-role="controlgroup" data-type="horizontal">
                <!--<legend>Alarm:</legend>-->
                <input type="radio" name="radio-alarm-state" id="radio-alarm-on">
                <label for="radio-alarm-on"  style="color:green;width:142px;">Alarm ON</label>
                <input type="radio" name="radio-alarm-state" id="radio-alarm-off" checked="checked">
                <label for="radio-alarm-off" style="color:red;width:142px;">Alarm OFF</label>
            </fieldset>
        </div>

        <div id="alarmStatus" style="">
            <!--<a data-corners="true" data-shadow="true" data-wrapperels="span" class="ui-shadow ui-btn-corner-all">29 min </a>-->
            <div class="ui-bar ui-bar-e" style="">
                <div  style="float:left;font-size: 24px;font-weight: 800;text-align: center;display:inline-block; width:85%; margin-top:5px;margin-left: 10px;">
                    <span style="" id="timeRemaining"></span>
                </div>
                <div style="float:right;width:30px;margin-top: 10px;">
                    <img id="imagePulse" src="assets/img/circle3.png" height="15px">
                </div>
            </div>
        </div>
    </div>
    <div id="debugLog" style="overflow:visible;font-size: 10px; color: #C97917;background-color: #fff9df;" data-role="collapsible">
        <h3>Debug Log</h3>
        <!--<a href="#pageDebug">debug</a>&nbsp;&nbsp;&nbsp;-->
        <a href="#"  onclick="clearLog();">Clear</a>&nbsp;&nbsp;&nbsp;
        <a href="#" onclick="getBartStations();">Load Stations</a>&nbsp;&nbsp;&nbsp;
        <a href="#" onclick="loadStopTimes();">Load Stop Times</a>&nbsp;&nbsp;&nbsp;
        <a href="#" onclick="getTripTime(stationDepartAbbr,stationArriveAbbr,getCurrentTimeHHMMSS());">Trip Time</a>&nbsp;&nbsp;&nbsp;
        <a href="#" onclick="alarm();">Alarm</a>&nbsp;&nbsp;&nbsp;
        <a href="#" onclick="alarmOff();">Alarm Off</a>&nbsp;&nbsp;&nbsp;
        <div id="log"  style="height: 200px;overflow: scroll;overflow-x:hidden;background-color: #111111; font-size: 12px; color: #C6E746;"></div>
    </div>
    <footer data-role="footer" data-id="footer"  data-position="fixed" style="height:35px;padding: 5px;">
        <div style="float:left;">
            <a href="http://www.mtsconsulting.biz/bna/aboutLink"  data-role="button" data-mini="true" ><span style="font-size: 10px;color: #b0c4de;font-style: italic;">by MTS</span></a>
            <a id="buttonDebug" href="#" data-role="button" data-mini="true" onclick="$('#debugLog').toggle();">DEBUG</a>
        </div>
        <div style="float:right;margin-right: 10px;">
            <a href="#pageMap"  ZZdata-rel="dialog" data-role="button">BART Map</a>
        </div>
        <div style="float:left;margin-left: 50px;margin-top: 10px;color:#a46312;">
            v0.1
        </div>
    </footer>
</section>

<section id="pageMap" data-role="page">
    <header data-role="header">
        <a href="#pageHome" data-icon="arrow-l">Back</a>
        <h1>BART Map</h1>
    </header>
    <div class="content" data-role="content">
        <p><img src="assets/img/system-map.gif"></p>
    </div>
    <!--<footer data-role="footer" ZZdata-position="fixed"><h1>MTS</h1></footer>-->
</section>

<section id="pageDebug" data-role="page">
    <header data-role="header"><h1>Debug Page</h1></header>
    <div class="content" data-role="content">
        <div id="geolocation">
        </div>
        <a href="#" id="" onclick="alarm()">Alarm</a>
    </div>
    <!--<footer data-role="footer" ZZdata-position="fixed"><h1>MTS</h1></footer>-->
</section>

<section id="pageStartTimes" data-role="page"  data-theme="b">
    <header data-role="header"  data-theme="b" style="">
        <a href="#pageHome" data-icon="arrow-l">Back</a>
        <h1>Departures</h1>
    </header>
    <div class="content" data-role="content">
        <div data-role="fieldcontain">
            <fieldset data-role="controlgroup">
                <legend>Select which train you are on:</legend>
                <input type="radio" name="radio-startTime" id="radio-startTime-1" value="choice-1" checked="checked" />
                <label for="radio-startTime-1">Start Time 1</label>

                <input type="radio" name="radio-startTime" id="radio-startTime-2" value="choice-2"  />
                <label for="radio-startTime-2">Dog</label>

                <input type="radio" name="radio-startTime" id="radio-startTime-3" value="choice-3"  />
                <label for="radio-startTime-3">Hamster</label>

                <input type="radio" name="radio-startTime" id="radio-startTime-4" value="choice-4"  />
                <label for="radio-startTime-4">Lizard</label>
            </fieldset>
        </div>
    </div>
    <!--<footer data-role="footer" ZZdata-position="fixed"><h1>MTS</h1></footer>-->
</section>

<!--Uncomment below to send debug to Phonegap Build site-->
<!--<script type="text/javascript" src="http://debug.phonegap.com/target/target-script-min.js#69d930ba-da73-11e1-9ed2-1231391c98a7"></script>-->
</body>

</html>